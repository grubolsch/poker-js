<button id="flop" class="game-action" data-amount="3">Flop</button>
<button id="turn" class="game-action" data-amount="1">Turn</button>
<button id="river" class="game-action" data-amount-test="1">River</button>

<div id="public-area"></div>

<div id="player-one">

</div>

<style>
    .card {
        font-size: 10em;
    }

    .hearts, .diamonds {
        color: red;
    }
</style>

<script>
    /** @description My original shuffle code using Math.random() - Math.random() was too naieve
     * You can read more about the algorithm I use on https://javascript.info/array-methods#shuffle-an-array
     * I did not know this :-) PHP has at least a build in shuffle function. :-P
     * */
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            let j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];//did you know you can assign multple variables in 1 line? Don't overuse this!
        }
        return array;
    }

    /** @description In order to render the cards I am using the unicode code, in combination with a little bit of CSS to color the cards red/black.
     * More info on https://en.wikipedia.org/wiki/Playing_cards_in_Unicode
     *
     * I will always reuse this function to render a card on the board
     * */
    function renderCard(card) {
        return '<span class="card '+ card.suit +'">'+ card.code +'</span>';
    }

    const CARDS_IN_SUIT = 13;

    /** @description
     * Changed the array<string> to an array of objects to contain the start value of the unicode.
     * Very often I find myself changing simple arrays to more complex arrays with object in it to contain multiple data points. */
    let suits = [
        {'code': 127136, 'name': 'spades'},
        {'code': 127152, 'name': 'hearts'},
        {'code': 127168, 'name': 'diamonds'},
        {'code': 127184, 'name': 'clubs'}
    ];
    let players = [
        {'name': 'Koen', 'cards': []},//0
        {'name': 'Paul', 'cards': []},//1
        {'name': 'Sanne', 'cards': []},//2
        {'name': 'Ik', 'cards': []},//3
    ];

    let deck = [];
    let publicCards = [];

    suits.forEach(function (suit) {
        for (let i = 1; i <= CARDS_IN_SUIT; i++) {
            let code = suit.code+i;
            /** @description In italian & spanish decks there is a knight card, this card normally appears between jack and queen.
             * We don't need it for Poker, so we are going to skip it by increasing the Unicode by 1 starting from the queen.
             * */
            if(i >= 12) {
                code++;
            }

            deck.push({'suit': suit.name, 'value': i, 'fullName': i + " of "+ suit.name, 'code': '&#'+ code +';'});
        }
    });


    //this line renders the entire deck
    //deck.forEach(card => document.getElementById('public-area').innerHTML += renderCard(card));
    deck = shuffle(deck);

    // each player gets 2 cards
    players.forEach(function (person) {
        person.cards.push(deck.pop());
        person.cards.push(deck.pop());
    });

    console.log(deck);
    console.log(players);

    players[0].cards.forEach(card => {
        document.getElementById('player-one').innerHTML += renderCard(card);
    });

    document.querySelectorAll('button.game-action').forEach((button) => {
        button.addEventListener('click', function() {
            for (let i = 0; i < this.dataset.amount; i++) {
                let card = deck.pop();
                publicCards.push(card);
                document.getElementById('public-area').innerHTML += renderCard(card);
            }
            this.setAttribute('disabled', 'disabled');
        });
    });

    function checkWinner() {
        alert('Check winner');
    }
</script>
